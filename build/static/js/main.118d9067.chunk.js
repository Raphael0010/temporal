(this.webpackJsonptemporal=this.webpackJsonptemporal||[]).push([[0],{147:function(e,t,a){e.exports=a(254)},253:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),l=a.n(c),o=(a(152),a(145)),i=a(33),s=a(55),m=a(125),u=a(23),p=a.n(u),f=a(50),d=a(9),E=a(261),g=a(32),v=a(255),b=a(256),h=a(257),j=a(143),y=a(260),O=a(262),k=a(263),w=a(264),S=function(){return"true"===localStorage.getItem("login")},x=function(){return localStorage.getItem("email")},C=function(){var e=Object(i.g)(),t=Object(n.useState)("N/A"),a=Object(d.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var e=x();e&&l(e)}),[c]),r.a.createElement("div",null,r.a.createElement(y.a,{mode:"horizontal"},r.a.createElement(y.a.Item,null,r.a.createElement(s.b,{to:"/dashboard"},r.a.createElement(O.a,{style:{marginRight:"5px"}}),"Dashboard")),r.a.createElement(y.a.Item,{style:{float:"right"},onClick:function(){localStorage.removeItem("login"),localStorage.removeItem("email"),e.replace("/")}},r.a.createElement(k.a,{style:{marginRight:"5px"}}),"D\xe9connexion"),r.a.createElement(y.a.Item,{style:{float:"right"}},r.a.createElement(w.a,{style:{marginRight:"5px"}}),c,"@temporal.com")))},I=a(57),D=a.n(I),M=a(258),Y=a(259),L=function(e){var t=e.sujet,a=e.from,c=e.message,l=e.date,o=Object(n.useState)(!1),i=Object(d.a)(o,2),s=i[0],m=i[1],u=function(){m(!s)};return r.a.createElement("div",null,r.a.createElement(g.a,{onClick:u},"Consulter l'email"),r.a.createElement(M.a,{visible:s,closable:!1,footer:[r.a.createElement(g.a,{key:"back",onClick:u},"Lu")]},r.a.createElement("h3",null,"Sujet : ",t),r.a.createElement("p",null,D()(l).format("YYYY-MM-DD HH:mm:ss")),r.a.createElement(Y.a,{disabled:!0,value:a}),r.a.createElement("p",{style:{paddingTop:"3%"}},c)))},B="http://172.22.247.155:8888",H=a(58),R=a.n(H),F=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(d.a)(l,2),i=o[0],s=o[1],m=Object(n.useState)(""),u=Object(d.a)(m,2),v=u[0],b=u[1],h=Object(n.useState)(""),j=Object(d.a)(h,2),y=j[0],O=j[1],k=Y.a.TextArea,w=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x(),a=new FormData,t&&a.append("emailFrom",t),a.append("emailDesti",v),a.append("sujet",i),a.append("message",y),e.next=8,R.a.post("".concat(B,"/api/email/send"),a);case 8:"ok"===e.sent.data&&(E.a.success("Votre email est envoy\xe9 !"),s(""),b(""),O(""),c(!1));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){c(!a)};return r.a.createElement("div",{style:{marginLeft:"1%"}},r.a.createElement(g.a,{onClick:S,type:"primary"},"Envoyer un email"),r.a.createElement(M.a,{visible:a,title:"Envoyer un email",closable:!1,footer:[r.a.createElement(g.a,{key:"cancel",onClick:S},"Cancel"),r.a.createElement(g.a,{key:"submit",type:"primary",onClick:w},"Envoyer")]},r.a.createElement(Y.a,{style:{marginBottom:"1%"},placeholder:"Sujet",value:i,onChange:function(e){s(e.target.value)}}),r.a.createElement(Y.a,{style:{marginBottom:"1%"},placeholder:"Destinataire",value:v,onChange:function(e){b(e.target.value)}}),r.a.createElement(k,{rows:4,placeholder:"Message",value:y,onChange:function(e){O(e.target.value)}})))},N=a(265),T=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],l=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("messageId",t),e.next=4,R.a.post("".concat(B,"/api/email/delete"),a);case 4:o(),E.a.success("Message supprim\xe9 !");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r,l,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x(),e.next=3,R.a.get("".concat(B,"/api/email/get/").concat(t));case 3:if(a=e.sent,n=[],r=0,a.data){l=Object(m.a)(a.data.reverse());try{for(l.s();!(o=l.n()).done;)i=o.value,r++,n.push({id:r,from:i.from,date:i.date,sujet:i.sujet,message:i.message,messageId:i.messageId})}catch(s){l.e(s)}finally{l.f()}}c(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.a.info("Messagerie rafra\xeechit !"),o();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("div",{style:{display:"flex",marginTop:"1%"}},r.a.createElement(F,null),r.a.createElement(g.a,{onClick:i,style:{marginLeft:"1%"},type:"default"},"Rafraichir ses emails")),r.a.createElement(v.a,null),a.length>0&&a.map((function(e){return r.a.createElement(b.a,{key:e.id,author:e.from,style:{marginLeft:"1%"},avatar:r.a.createElement(h.a,{src:"https://cdn3.iconfinder.com/data/icons/peelicons-vol-1/50/Mail-512.png",alt:"Exp\xe9diteur"}),actions:[r.a.createElement(L,{sujet:e.sujet,from:e.from,message:e.message,date:e.date}),r.a.createElement(j.a,{title:"Supprimer"},r.a.createElement(g.a,{style:{marginLeft:"40%"},type:"primary",shape:"circle",icon:r.a.createElement(N.a,null),onClick:function(){return l(e.messageId)}}))],content:r.a.createElement("p",null,e.sujet),datetime:r.a.createElement(j.a,{title:D()(e.date).format("YYYY-MM-DD HH:mm:ss")},r.a.createElement("span",null,D()(e.date).fromNow()))})})))},z=(a(253),function(){var e=Object(i.g)(),t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(d.a)(o,2),m=s[0],u=s[1],p=function(){var t;t=c,localStorage.setItem("email",t),localStorage.setItem("login","true"),e.replace("/dashboard")};return Object(n.useEffect)((function(){S()&&u(!0)}),[]),r.a.createElement("div",{className:"bg-modal"},m&&r.a.createElement(i.a,{to:"/dashboard"}),r.a.createElement(M.a,{footer:[r.a.createElement(g.a,{key:"submit",type:"primary",onClick:p},"V\xe9rifier les mails")],title:" Saisissez le mail jetable de votre choix",visible:!0,closable:!1},r.a.createElement(Y.a,{required:!0,placeholder:"@temporal.com",value:c,onPressEnter:p,onChange:function(e){l(e.target.value)}})))}),A=function(){var e=function(e){var t=e.component,a=Object(o.a)(e,["component"]),n=!1;S()&&(n=!0);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/"}})}}))};return r.a.createElement(s.a,null,r.a.createElement(i.d,null,r.a.createElement(e,{path:"/dashboard/",component:T}),r.a.createElement(i.b,{path:"/",exact:!0,component:z})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[147,1,2]]]);
//# sourceMappingURL=main.118d9067.chunk.js.map